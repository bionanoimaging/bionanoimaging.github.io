{
    "version": 1.0,
    "number": "1",
    "title": "Abbe's Experiment",
    "steps": [
        {
            "type": "addComponent",
            "component": "Laser",
            "name": "Laser",
            "rays": [2, 3],
            "diameter": 0.5,
            "position": [-10,0],
            "height": 1.0,
            "rotation": 0.0,
            "dof": "Zz",
            "limits": [[],[],[0.8,1.2],[],[],[-5,5]]
        },
        {
            "type": "addComponent",
            "component": "Iris",
            "name": "Position Iris",
            "position": [-8,0],
            "diameter": 0.05,
            "success": {"diameter": 0.08},
            "dof": ""
        },
        {
            "type": "addComponent",
            "component": "Iris",
            "name": "Angle Iris",
            "position": [0,0],
            "diameter": 0.05,
            "success": {"diameter": 0.08},
            "dof": ""
        },
        {
            "type": "addComponent",
            "component": "Screen",
            "name": "Screen",
            "position": [6,0],
            "target": true,
            "dof": "XY",
            "rotation": 0
        },
        {
            "type": "task",
            "instruction": "Adjust the height and the angle of the laser\nusing two irises to have a well defined optical axis.",
            "success": {"PosX": 0.01, "PosY": 0.01,"Num": 1},
            "score": 100.0,
            "music": {
                "link": "music/Emotional+Ballad+-+320bit.mp3",
                "credits": "Emotional Ballad by Alexander Nakarada | https://www.serpentsoundstudios.comn\nCreative Commons CC BY 4.0, https://creativecommons.org/licenses/by/4.0/"
            },
            "showbeams": true
        },
        {
            "type": "addComponent",
            "component": "Lens",
            "name": "Condenser Lens",
            "rotation": [0,1,-1],
            "position": [-1,1],
            "r1": 0.5,
            "dof": "XYxyz",
            "limits": [[-1.2,-0.8],[-1,1],[],[-180,180],[-180,180],[-180,180]]
        },
        {
            "type": "modifyComponent",
            "name": "Laser",
            "dof": ""
        },
        {
            "type": "modifyComponent",
            "name": "Position Iris",
            "diameter": 0.8,
            "dof": "f"
        },
        {
            "type": "modifyComponent",
            "name": "Angle Iris",
            "diameter": 0.8,
            "position": [-3,0],
            "dof": "f"
        },
        {
            "type": "modifyComponent",
            "name": "Screen",
            "position": [0,0],
            "rotation": 0,
            "dof": ""
        },
        {
            "type": "task",
            "instruction": "By rotating and moving the condenser lens\nalong X- and Y-coordinates, focus the laser beam on the\ncentre of the screen.",
            "success": {"PosX": 0.01,"PosY": 0.01},
            "score": 200.0,
            "showbeams": true
        },
        {
            "type": "addComponent",
            "component": "Lens",
            "name": "Field Lens",
            "rotation": [0,-1,0.8],
            "position": [-6,1],
            "r1": 2.0,
            "dof": "XYxyz",
            "limits": [[-7,-1],[-1,1],[],[-5,5],[-5,5],[-5,5]]
        },
        {
            "type": "addComponent",
            "component": "DualPinhole",
            "name": "P1",
            "position": [1,0],
            "diameter": 0.05,
            "separation": 0.04,
            "launches": true,
            "dof": "XY",
            "limits": [[1,3],[-0.8,1.2],[]]
        },
        {
            "type": "addComponent",
            "component": "DualPinhole",
            "name": "P2",
            "position": [8,0],
            "rotation": 0,
            "diameter": 0.05,
            "separation": 0.04,
            "dof": "XY",
            "limits": [[6,8],[-0.8,1.2],[]]
        },
        {
            "type": "modifyComponent",
            "name": "Screen",
            "target": true,
            "position": [10,0]
        },
        {
            "type": "task",
            "instruction": "Adjust the position of field lens between\nthe two irises in order to obtain a collimated beam after\nthe condenser lens.",
            "success": {"Num": 1},
            "score": 300.0
        },
        {
            "type": "removeComponent",
            "name": "P1"
        },
        {
            "type": "removeComponent",
            "name": "P2"
        },
        {
            "type": "modifyComponent",
            "name": "Angle Iris",
            "diameter": 0.5,
            "success": {"diameter": 0.8},
            "dof": "X",
            "limits": [[-4,-1.8]]
        },
        {
            "type": "modifyComponent",
            "name": "Screen",
            "target": true,
            "position": [3,0]
        },
        {
            "type": "task",
            "instruction": "Adjust the position of angle iris to the first conjugate plane\ni.e the front focal plane of field lens.",
            "success": {"Num": 1},
            "score": 400.0,
            "showbeams": true
        },
        {
            "type": "addComponent",
            "component": "Lens",
            "name": "Objective Lens",
            "rotation": [0,1.2,-1],
            "position": [1,1],
            "r1": 1.0,
            "r2": 1.0,
            "dof": "XYxyz",
            "limits": [[0.8,1.8],[-1,1],[],[-5,5],[-5,5],[-5,5]]
        },
        {
            "type": "modifyComponent",
            "name": "Angle Iris",
            "diameter": 0.3,
            "dof": "f"
        },
        {
            "type": "modifyComponent",
            "name": "Screen",
            "target": true,
            "position": [2.2,0]
        },
        {
            "type": "task",
            "instruction": "By rotating and moving the objective lens\nalong X- and Y-coordinates, focus the laser beam on the\ncentre of the screen.",
            "success": {"Num": 1},
            "score": 500.0,
            "showbeams": true
        },
        {
            "type": "addComponent",
            "component": "Lens",
            "name": "Tube Lens",
            "rotation": [0,1.2,-1.2],
            "position": [4,1],
            "r1": 0,
            "r2": 1.0,
            "dof": "XYxyz",
            "limits": [[3,4.8],[-1,1],[],[-5,5],[-5,5],[-5,5]]
        },
        {
            "type": "addComponent",
            "component": "DualPinhole",
            "name": "DP1",
            "position": [5.4,0],
            "diameter": 0.05,
            "separation": 0.04,
            "launches": true,
            "dof": "XY",
            "limits": [[5.2,6.2],[-0.8,1.2],[]]
        },
        {
            "type": "addComponent",
            "component": "DualPinhole",
            "name": "DP2",
            "position": [9,0],
            "rotation": 0,
            "diameter": 0.05,
            "separation": 0.04,
            "dof": "XY",
            "limits": [[7,9],[-0.8,1.2],[]]
        },
        {
            "type": "modifyComponent",
            "name": "Screen",
            "target": true,
            "position": [10,0]
        },
        {
            "type": "task",
            "instruction": "Position of tube lens at the back focal plane\nof the objevtive lens and adjust to obtain a collimated beam after\nat the screen.",
            "success": {"PosX": 0.01,"Num": 1},
            "score": 800.0
        },
        {
            "type": "modifyComponent",
            "name": "DP1",
            "launches": false
        },
        {
            "type": "removeComponent",
            "name": "DP1"
        },
        {
            "type": "removeComponent",
            "name": "DP2"
        },
        {
            "type": "addComponent",
            "component": "Beamsplitter",
            "name": "Beam Splitter",
            "position": [2.3,1],
            "rotation": 40,
            "dof": "XYz",
            "limits": [[2,3.3],[-1,1],[],[],[],[35,50]]
        },
        {
            "type": "addComponent",
            "component": "Pinhole",
            "name": "P3",
            "position": [3,-2],
            "diameter": 0.07,
            "rotation": 90,
            "dof": "XY",
            "limits": [[2,3.3],[-2.2,-1.5],[]]
        },
        {
            "type": "addComponent",
            "component": "Pinhole",
            "name": "P4",
            "position": [2,-6],
            "diameter": 0.07,
            "rotation": 90,
            "dof": "XY",
            "limits": [[2,3.3],[-7,-5.5],[]]
        },
        {
            "type": "modifyComponent",
            "name": "Screen",
            "target": true,
            "position": [7,0]
        },
        {
            "type": "addComponent",
            "component": "Screen",
            "name": "Projection Screen",
            "position": [2.7,-8],
            "target": true,
            "dof": "XY",
            "rotation": 90
        },
        {
            "type": "task",
            "instruction": "Position and adjust the beamsplitter between the objective\nand tube lens, and adjust the reflected beam path using two pinholes. ",
            "success": {"PosX": 0.01, "PosY": 0.01, "Num": 1},
            "score": 850.0
        },
        {
            "type": "task",
            "instruction": "Congratulations! You completed the Abbe's Experiment.",
            "narration": {
                "link": "narrations/lvl2t7.m4a",
                "credits": "Rainer Heintzmann"
            },
            "final": true
        }
   ]
}